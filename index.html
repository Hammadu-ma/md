<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MediQuiz Pro | Advanced Medical Education</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style type="text/css">
        /* Import Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

        :root {
            --primary: #3b82f6; 
            --primary-dark: #2563eb; 
            --primary-light: #dbeafe; 
            --secondary: #6b7280; 
            --success: #22c55e; 
            --error: #ef4444; 
            --warning: #eab308; 
            --info: #0ea5e9; 
            --background: #ffffff; 
            --surface: #f9fafb; 
            --text-primary: #111827; 
            --text-secondary: #4b5563; 
            --text-tertiary: #9ca3af; 
            --border: #e5e7eb; 
            --shadow: 0 2px 4px rgba(0, 0, 0, 0.05); 
            --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.05);
            --radius: 8px; 
            --radius-lg: 12px;
            --radius-xl: 16px;
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1); 
            --gradient: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
            --glass: rgba(255, 255, 255, 0.85); 
            --glass-border: rgba(229, 231, 235, 0.3);
        }

        .dark-mode {
            --primary: #60a5fa;
            --primary-dark: #3b82f6;
            --primary-light: #93c5fd;
            --secondary: #94a3b8;
            --background: #000000; 
            --surface: #111827; 
            --text-primary: #f9fafb; 
            --text-secondary: #d1d5db; 
            --text-tertiary: #6b7280; 
            --border: #1f2937; 
            --shadow: 0 2px 4px rgba(0, 0, 0, 0.6); 
            --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.6);
            --shadow-xl: 0 8px 16px rgba(0, 0, 0, 0.6);
            --glass: rgba(17, 24, 39, 0.85); 
            --glass-border: rgba(31, 41, 55, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none; 
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 16px;
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-light);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* App Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--surface);
            border-right: 1px solid var(--border);
            padding: 24px 0;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow);
            transform: translateX(-100%);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-header {
            padding: 0 24px 16px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 24px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 22px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .logo i {
            font-size: 24px;
        }

        .sidebar-subtitle {
            font-size: 13px;
            color: var(--text-tertiary);
            font-weight: 400;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 24px;
            margin-bottom: 24px;
            background: var(--glass);
            border-radius: var(--radius);
            margin: 0 16px 24px;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
            box-shadow: var(--shadow);
        }

        .user-info h3 {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .user-info p {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 24px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: var(--glass);
            border-left-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .nav-item.active {
            background: var(--primary-light);
            color: var(--primary);
            border-left-color: var(--primary);
        }

        .nav-item.active .nav-icon {
            color: var(--primary);
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        .categories-section {
            margin-top: 24px;
        }

        .section-title {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 16px;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .categories-grid {
            padding: 0 16px;
        }

        .category-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .category-card:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .category-card.active {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .category-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
        }

        .category-card.active .category-icon {
            background: var(--primary);
        }

        .category-name {
            font-weight: 500;
            font-size: 14px;
        }

        .category-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
        }

        .progress-bar {
            flex: 1;
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
            margin-right: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 2px;
            transition: width 0.4s ease;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-tertiary);
            font-weight: 500;
        }

        .category-card.active .progress-text {
            color: var(--primary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 0;
            transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .main-content.sidebar-open {
            margin-left: 280px;
        }

        .top-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 32px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 20px;
            color: var(--text-primary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: var(--primary-light);
        }

        .page-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .mode-selector {
            display: flex;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 4px;
        }

        .mode-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .mode-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: var(--shadow);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 16px;
            padding: 24px 32px;
        }

        .stat-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .stat-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Quiz Container */
        .quiz-container {
            padding: 0 32px 32px;
        }

        .question-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .question-card.fade-in {
            opacity: 1;
        }

        .question-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }

        .question-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .question-number {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
            background: var(--primary-light);
            padding: 6px 12px;
            border-radius: 16px;
        }

        .question-category {
            font-size: 13px;
            color: var(--text-secondary);
            font-weight: 500;
            background: var(--glass);
            padding: 6px 12px;
            border-radius: 16px;
        }

        .question-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--glass);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-secondary);
        }

        .action-btn:hover {
            background: var(--primary-light);
            color: var(--primary);
            border-color: var(--primary-light);
        }

        .question-text {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.6;
            margin-bottom: 24px;
            color: var(--text-primary);
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }

        .option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            background: var(--glass);
            min-height: 60px;
        }

        .option:hover {
            border-color: var(--primary-light);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .option.selected {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .option.correct {
            border-color: var(--success);
            background: rgba(34, 197, 94, 0.05);
        }

        .option.incorrect {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.05);
        }

        .option-letter {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--surface);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
            flex-shrink: 0;
            transition: var(--transition);
        }

        .option.selected .option-letter {
            background: var(--primary);
            color: white;
        }

        .option.correct .option-letter {
            background: var(--success);
            color: white;
        }

        .option.incorrect .option-letter {
            background: var(--error);
            color: white;
        }

        .option-text {
            flex: 1;
            font-size: 15px;
            font-weight: 400;
        }

        /* Explanation Section */
        .explanation-section {
            margin-top: 24px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 24px;
        }

        .explanation-section details {
            margin-bottom: 16px;
        }

        .explanation-section summary {
            padding: 12px 16px;
            background: var(--surface);
            cursor: pointer;
            font-weight: 500;
            font-size: 15px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .explanation-section summary:hover {
            background: var(--primary-light);
        }

        .explanation-section details[open] summary {
            background: var(--primary);
            color: white;
        }

        .explanation-content {
            padding: 16px;
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .explanation-content strong {
            color: var(--text-primary);
        }

        .correct-answer, .why-not-section, .related-questions {
            margin-bottom: 16px;
            padding: 16px;
            border-radius: var(--radius);
        }

        .correct-answer {
            background: rgba(34, 197, 94, 0.05);
            border-left: 4px solid var(--success);
        }

        .why-not-section {
            background: rgba(239, 68, 68, 0.05);
            border-left: 4px solid var(--error);
        }

        .related-questions {
            background: rgba(59, 130, 246, 0.05);
            border-left: 4px solid var(--primary);
        }

        .related-questions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .related-question-tag {
            padding: 6px 12px;
            background: rgba(59, 130, 246, 0.1);
            color: var(--primary);
            border-radius: 16px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
        }

        .related-question-tag:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-1px);
        }

        /* Quiz Controls */
        .quiz-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 32px;
            padding-top: 24px;
            border-top: 1px solid var(--border);
        }

        .quiz-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .quiz-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        .quiz-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .check-btn {
            background: var(--primary);
            color: white;
        }

        .check-btn:hover:not(:disabled) {
            background: var(--primary-dark);
        }

        .next-btn {
            background: var(--success);
            color: white;
        }

        .next-btn:hover:not(:disabled) {
            background: #16a34a;
        }

        .submit-btn {
            background: var(--gradient);
            color: white;
            padding: 12px 32px;
            font-size: 16px;
        }

        /* Results Screen */
        .results-screen {
            padding: 32px;
            max-width: 900px;
            margin: 0 auto;
        }

        .results-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 48px;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        .results-header {
            margin-bottom: 32px;
        }

        .results-title {
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .score-display {
            font-size: 64px;
            font-weight: 700;
            margin: 32px 0;
            color: var(--text-primary);
        }

        .score-text {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .results-details {
            text-align: left;
            margin: 48px 0;
            background: var(--glass);
            border-radius: var(--radius);
            padding: 24px;
            border: 1px solid var(--glass-border);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-question {
            flex: 1;
            font-size: 14px;
        }

        .result-status {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 12px;
            font-weight: 600;
        }

        .result-correct {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .result-incorrect {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .restart-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 16px 48px;
            border-radius: var(--radius);
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 999;
            display: none;
            transition: opacity 0.3s ease;
        }

        .overlay.active {
            display: block;
            opacity: 1;
        }

        /* Enhanced Features */
        .search-container {
            padding: 16px 32px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
        }

        .search-box {
            display: flex;
            align-items: center;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 12px 16px;
            max-width: 400px;
            margin: 0 auto;
        }

        .search-box input {
            flex: 1;
            border: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-box i {
            color: var(--text-tertiary);
            margin-right: 8px;
        }

        .analytics-section {
            padding: 24px 32px;
            background: var(--surface);
            margin: 16px 32px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
        }

        .analytics-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
        }

        .analytics-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .analytics-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .analytics-label {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .export-section {
            padding: 16px 32px;
            text-align: center;
        }

        .export-btn {
            background: var(--gradient);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .export-btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        /* Custom Quiz Modal */
/* Custom Quiz Modal Styles */
.custom-quiz-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.custom-quiz-modal.active {
    display: flex;
}

.custom-quiz-content {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 32px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border);
}

.custom-quiz-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text-primary);
}

.custom-quiz-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
}

.custom-quiz-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    cursor: pointer;
    transition: var(--transition);
    background: var(--glass);
}

.custom-quiz-option:hover {
    border-color: var(--primary-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow);
}

.custom-quiz-option.selected {
    border-color: var(--primary);
    background: var(--primary-light);
}

.custom-quiz-option .option-selector {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    flex-shrink: 0;
}

.custom-quiz-option.selected .option-selector {
    background: var(--primary);
    border-color: var(--primary);
}

.custom-quiz-option.selected .option-selector::after {
    content: '✓';
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.custom-quiz-option label {
    cursor: pointer;
    font-weight: 500;
    color: var(--text-primary);
    flex: 1;
    margin: 0;
}

.quiz-options-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
}

.quiz-options-section label {
    display: block;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 600;
}

.custom-quiz-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 24px;
}

/* Modern Dropdown for Custom Quiz */
.custom-quiz-content .modern-dropdown {
    position: relative;
    margin-top: 8px;
}

.custom-quiz-content .modern-dropdown select {
    width: 100%;
    padding: 12px 48px 12px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    background: var(--surface);
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    background-size: 18px;
}

.custom-quiz-content .modern-dropdown select:hover {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.custom-quiz-content .modern-dropdown select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Glass effect for modal */
.custom-quiz-content.glass-effect {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark-mode .custom-quiz-content.glass-effect {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

        /* Mobile Optimizations */
        @media (max-width: 768px) {
            .sidebar {
                width: 100vw;
            }

            .main-content.sidebar-open {
                margin-left: 100vw;
            }

            .top-nav {
                padding: 12px 16px;
                flex-wrap: wrap;
                gap: 12px;
            }

            .nav-left {
                width: 100%;
                justify-content: space-between;
            }

            .nav-right {
                width: 100%;
                justify-content: space-between;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                padding: 16px;
            }

            .quiz-container {
                padding: 0 16px 16px;
            }

            .question-card {
                padding: 24px;
            }

            .question-text {
                font-size: 17px;
            }

            .option {
                padding: 12px;
                min-height: 70px;
            }

            .results-card {
                padding: 32px 24px;
            }

            .score-display {
                font-size: 48px;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .search-container {
                padding: 12px 16px;
            }

            .analytics-section {
                margin: 16px;
                padding: 16px;
            }

            .quiz-btn {
                padding: 16px 20px;
                font-size: 16px;
            }
        }

        @media (min-width: 1200px) {
            .quiz-container {
                max-width: 1100px;
                margin: 0 auto;
                padding: 24px;
            }

            .question-card {
                max-width: 1000px;
                margin: 0 auto 24px;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        .hidden {
            display: none;
        }

        .glass {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow);
        }

        .text-gradient {
            background: var(--gradient);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .question-difficulty {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            color: white;
        }

        .question-dropdown {
            margin-top: 8px;
            display: block;
        }

        .question-dropdown select {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: var(--surface);
            color: var(--text-primary);
            font-size: 13px;
            cursor: pointer;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.6;
            cursor: not-allowed;
        }

        .timer-warning {
            color: var(--warning);
        }

        .timer-error {
            color: var(--error);
        }

        .loading-spinner {
            display: none;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            width: 16px;
            height: 16px;
            animation: spin 1s linear infinite;
        }

        .loading-spinner.active {
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Ultra Modern Styles */
        /* Glass Morphism Effects */
        .glass-effect {
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dark-mode .glass-effect {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Enhanced Hover Effects with Glow */
        .nav-item:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, rgba(59, 130, 246, 0.15) 100%) !important;
            border-left-color: var(--primary) !important;
            transform: translateX(8px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.25) !important;
            backdrop-filter: blur(10px);
        }

        .category-card:hover {
            background: linear-gradient(135deg, var(--glass) 0%, rgba(255, 255, 255, 0.95) 100%) !important;
            transform: translateY(-5px) scale(1.03) !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 0 30px rgba(59, 130, 246, 0.1) !important;
            border-color: var(--primary) !important;
            backdrop-filter: blur(10px);
        }

        .option:hover {
            background: linear-gradient(135deg, var(--primary-light) 0%, rgba(59, 130, 246, 0.12) 100%) !important;
            transform: translateY(-3px) scale(1.03) !important;
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.2) !important;
            border-color: var(--primary) !important;
        }

        .quiz-btn:hover:not(:disabled) {
            transform: translateY(-3px) scale(1.08) !important;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.25) !important;
            filter: brightness(1.1);
        }

        .action-btn:hover {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%) !important;
            color: white !important;
            transform: scale(1.15) rotate(8deg) !important;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.5) !important;
        }

        /* Ultra Modern Dropdown */
        /* Modern Dropdown Styling */
.modern-dropdown {
    position: relative;
    margin-top: 8px;
}

.modern-dropdown select {
    width: 100%;
    padding: 10px 40px 10px 12px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius);
    background: var(--surface);
    color: var(--text-primary);
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 14px;
    box-shadow: var(--shadow);
}

.modern-dropdown select:hover {
    border-color: var(--primary);
    background-color: var(--primary-light);
    box-shadow: var(--shadow-lg);
}

.modern-dropdown select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Dark mode dropdown adjustments */
.dark-mode .modern-dropdown select {
    background-color: var(--surface);
    border-color: var(--border);
    color: var(--text-primary);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
}

.dark-mode .modern-dropdown select:hover {
    background-color: rgba(59, 130, 246, 0.1);
    border-color: var(--primary);
}

/* Notification Styling - Fixed for both light and dark modes */
.notification {
    position: fixed;
    top: 30px;
    right: 30px;
    padding: 16px 20px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    z-index: 10000;
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    font-weight: 600;
    max-width: 400px;
    line-height: 1.5;
    display: flex;
    align-items: center;
    gap: 12px;
}

/* Light mode notifications */
.notification.info {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.9));
    color: white;
    border-color: rgba(59, 130, 246, 0.3);
}

.notification.success {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.9), rgba(22, 163, 74, 0.9));
    color: white;
    border-color: rgba(34, 197, 94, 0.3);
}

.notification.error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.9));
    color: white;
    border-color: rgba(239, 68, 68, 0.3);
}

.notification.warning {
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.9), rgba(202, 138, 4, 0.9));
    color: white;
    border-color: rgba(234, 179, 8, 0.3);
}

/* Dark mode notification adjustments */
.dark-mode .notification.info {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.8));
    border-color: rgba(59, 130, 246, 0.4);
}

.dark-mode .notification.success {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.8), rgba(22, 163, 74, 0.8));
    border-color: rgba(34, 197, 94, 0.4);
}

.dark-mode .notification.error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.8), rgba(220, 38, 38, 0.8));
    border-color: rgba(239, 68, 68, 0.4);
}

.dark-mode .notification.warning {
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.8), rgba(202, 138, 4, 0.8));
    border-color: rgba(234, 179, 8, 0.4);
}

/* Notification icons */
.notification i {
    font-size: 18px;
    flex-shrink: 0;
}

.notification span {
    flex: 1;
}

/* Animation for notification */
@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Sidebar dropdown specific styling */
.sidebar .modern-dropdown select {
    background: var(--glass);
    border: 1px solid var(--glass-border);
    font-size: 12px;
    padding: 8px 32px 8px 10px;
}

.sidebar .modern-dropdown select:hover {
    background: var(--primary-light);
    border-color: var(--primary);
}

/* Ensure text is readable in all modes */
.modern-dropdown select option {
    background: var(--surface);
    color: var(--text-primary);
    padding: 8px;
}

/* Fix for dropdown in dark mode */
.dark-mode .modern-dropdown select option {
    background: var(--surface);
    color: var(--text-primary);
}

/* Mobile responsiveness for notifications */
@media (max-width: 768px) {
    .notification {
        right: 16px;
        left: 16px;
        max-width: none;
        top: 20px;
    }
}
/* Custom Quiz Modal Styles */
.custom-quiz-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 2000;
}

.custom-quiz-modal.active {
    display: flex;
}

.custom-quiz-content {
    background: var(--surface);
    border-radius: var(--radius-lg);
    padding: 32px;
    max-width: 500px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: var(--shadow-xl);
    border: 1px solid var(--border);
}

.custom-quiz-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 24px;
    color: var(--text-primary);
}

.custom-quiz-options {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 24px;
}

.custom-quiz-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    cursor: pointer;
    transition: var(--transition);
    background: var(--glass);
}

.custom-quiz-option:hover {
    border-color: var(--primary-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow);
}

.custom-quiz-option.selected {
    border-color: var(--primary);
    background: var(--primary-light);
}

.custom-quiz-option .option-selector {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border);
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: var(--transition);
    flex-shrink: 0;
}

.custom-quiz-option.selected .option-selector {
    background: var(--primary);
    border-color: var(--primary);
}

.custom-quiz-option.selected .option-selector::after {
    content: '✓';
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.custom-quiz-option label {
    cursor: pointer;
    font-weight: 500;
    color: var(--text-primary);
    flex: 1;
    margin: 0;
}

.quiz-options-section {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
}

.quiz-options-section label {
    display: block;
    color: var(--text-secondary);
    margin-bottom: 8px;
    font-weight: 600;
}

.custom-quiz-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 24px;
}

/* Modern Dropdown for Custom Quiz */
.custom-quiz-content .modern-dropdown {
    position: relative;
    margin-top: 8px;
}

.custom-quiz-content .modern-dropdown select {
    width: 100%;
    padding: 12px 48px 12px 16px;
    border: 2px solid var(--border);
    border-radius: var(--radius);
    background: var(--surface);
    color: var(--text-primary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 16px center;
    background-size: 18px;
}

.custom-quiz-content .modern-dropdown select:hover {
    border-color: var(--primary);
    background-color: var(--primary-light);
}

.custom-quiz-content .modern-dropdown select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Glass effect for modal */
.custom-quiz-content.glass-effect {
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark-mode .custom-quiz-content.glass-effect {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

        /* Enhanced Search with Blur Effect */
        .search-container {
            transition: all 0.4s ease;
        }

        .search-box {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .search-box:focus-within {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.2);
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.15);
        }

        .search-blur-active .main-content > *:not(.search-container):not(.quiz-container) {
            filter: blur(8px);
            opacity: 0.7;
            pointer-events: none;
        }

        /* Beautiful Stats Cards */
        .stat-card {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }

        .stat-card:hover::before {
            left: 100%;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.05) !important;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2) !important;
        }

        /* Modern Progress Bars */
        .progress-fill {
            transition: width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) !important;
            background: linear-gradient(90deg, var(--primary), var(--primary-dark), #8b5cf6) !important;
            box-shadow: 0 2px 12px rgba(59, 130, 246, 0.4);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.6), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Beautiful Notification */
        .notification {
            border-radius: 20px !important;
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.15)) !important;
        }

        .dark-mode .notification {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.2)) !important;
        }

        /* Enhanced Question Cards */
        .question-card {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .question-card:hover {
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15) !important;
            transform: translateY(-3px);
            border-color: var(--primary-light);
        }

        /* Modern Settings Panel */
        .settings-panel {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
        }

        .dark-mode .settings-panel {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Custom Question Creator */
        .custom-question-creator {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            padding: 32px;
        }

        .dark-mode .custom-question-creator {
            background: rgba(0, 0, 0, 0.2);
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.15) rotate(15deg);
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.6);
        }

        /* Dark mode adjustments */
        .dark-mode .nav-item:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(59, 130, 246, 0.1) 100%) !important;
        }

        .dark-mode .category-card:hover {
            background: linear-gradient(135deg, var(--glass) 0%, rgba(17, 24, 39, 0.95) 100%) !important;
        }

        .dark-mode .option:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(59, 130, 246, 0.08) 100%) !important;
        }

        /* Search Results Highlight */
        .search-highlight {
            background: linear-gradient(120deg, var(--primary-light) 0%, transparent 50%);
            border-radius: 4px;
            padding: 2px 4px;
        }
    
    </style>
</head>
<body class="dark-mode">
    <div class="overlay" id="overlay"></div>
    
    <!-- Custom Quiz Modal -->
<div class="custom-quiz-modal" id="customQuizModal">
    <div class="custom-quiz-content glass-effect">
        <h3 class="custom-quiz-title">Create Custom Quiz</h3>
        <div class="custom-quiz-options">
            <div class="custom-quiz-option" data-category="all">
                <div class="option-selector"></div>
                <label>All Categories</label>
            </div>
            <div class="custom-quiz-option" data-category="easy">
                <div class="option-selector"></div>
                <label>Easy Questions Only</label>
            </div>
            <div class="custom-quiz-option" data-category="medium">
                <div class="option-selector"></div>
                <label>Medium Questions Only</label>
            </div>
            <div class="custom-quiz-option" data-category="hard">
                <div class="option-selector"></div>
                <label>Hard Questions Only</label>
            </div>
            <div class="custom-quiz-option" data-category="bookmarked">
                <div class="option-selector"></div>
                <label>Bookmarked Questions Only</label>
            </div>
            <div class="quiz-options-section">
                <label>Number of Questions</label>
                <div class="modern-dropdown">
                    <select id="questionCount">
                        <option value="5">5 Questions</option>
                        <option value="10" selected>10 Questions</option>
                        <option value="15">15 Questions</option>
                        <option value="20">20 Questions</option>
                        <option value="0">All Questions</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="custom-quiz-actions">
            <button class="quiz-btn" id="cancelCustomQuiz">
                Cancel
            </button>
            <button class="quiz-btn check-btn" id="createCustomQuiz">
                Create Quiz
            </button>
        </div>
    </div>
</div>
    
    <!-- Main App Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-stethoscope"></i>
                    <span>MediQuiz Pro</span>
                </div>
                <div class="sidebar-subtitle">Advanced Medical Education Platform</div>
            </div>
            
            <div class="user-profile">
                <div class="user-avatar">JD</div>
                <div class="user-info">
                    <h3>Dr. John Doe</h3>
                    <p>Medical Student</p>
                </div>
            </div>
            
            <div class="nav-item active">
                <div class="nav-icon">
                    <i class="fas fa-home"></i>
                </div>
                <span>Dashboard</span>
            </div>
            <div class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <span>My Courses</span>
            </div>
            <div class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <span>Progress Analytics</span>
            </div>
            <div class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-bookmark"></i>
                </div>
                <span>Bookmarked Questions</span>
            </div>
            <div class="nav-item">
                <div class="nav-icon">
                    <i class="fas fa-cog"></i>
                </div>
                <span>Settings</span>
            </div>
            
            <div class="categories-section">
                <div class="section-title">
                    <span>Medical Categories</span>
                    <i class="fas fa-sliders-h"></i>
                </div>
                <div class="categories-grid" id="categoriesGrid"></div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Top Navigation -->
            <div class="top-nav">
                <div class="nav-left">
                    <button class="menu-toggle" id="menuToggle" aria-label="Toggle Sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">Medical Quiz Dashboard</h1>
                </div>
                <div class="nav-right">
                    <div class="mode-selector">
                        <button class="mode-btn active" data-mode="exam" aria-label="Exam Mode">
                            <i class="fas fa-file-alt"></i>
                            Exam
                        </button>
                        <button class="mode-btn" data-mode="quiz" aria-label="Quiz Mode">
                            <i class="fas fa-tasks"></i>
                            Quiz
                        </button>
                        <button class="mode-btn" data-mode="learn" aria-label="Learn Mode">
                            <i class="fas fa-brain"></i>
                            Learn
                        </button>
                    </div>
                    <div class="action-btn" id="themeToggle" aria-label="Toggle Theme">
                        <i class="fas fa-sun"></i>
                    </div>
                    <div class="action-btn" aria-label="Notifications">
                        <i class="fas fa-bell"></i>
                    </div>
                </div>
            </div>
            
            <!-- Search Section -->
            <div class="search-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search questions or categories...">
                </div>
            </div>
            
            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card fade-in">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up" style="color: var(--success);"></i>
                            <span style="color: var(--success); font-size: 13px;">+12%</span>
                        </div>
                    </div>
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
                <div class="stat-card fade-in">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-down" style="color: var(--error);"></i>
                            <span style="color: var(--error); font-size: 13px;">-5%</span>
                        </div>
                    </div>
                    <div class="stat-value" id="timeSpent">0h</div>
                    <div class="stat-label">Time Spent</div>
                </div>
                <div class="stat-card fade-in">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up" style="color: var(--success);"></i>
                            <span style="color: var(--success); font-size: 13px;">+8%</span>
                        </div>
                    </div>
                    <div class="stat-value" id="masteryLevel">0%</div>
                    <div class="stat-label">Mastery Level</div>
                </div>
                <div class="stat-card fade-in">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up" style="color: var(--warning);"></i>
                            <span style="color: var(--warning); font-size: 13px;">+3</span>
                        </div>
                    </div>
                    <div class="stat-value" id="streakCount">0</div>
                    <div class="stat-label">Day Streak</div>
                </div>
            </div>
            
            <!-- Analytics Section -->
            <div class="analytics-section">
                <h3 class="analytics-title">Learning Analytics</h3>
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <div class="analytics-value" id="weakAreasCount">0</div>
                        <div class="analytics-label">Weak Areas Identified</div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-value" id="avgTimePerQuestion">0s</div>
                        <div class="analytics-label">Avg Time Per Question</div>
                    </div>
                    <div class="analytics-card">
                        <div class="analytics-value" id="improvementRate">0%</div>
                        <div class="analytics-label">Weekly Improvement</div>
                    </div>
                </div>
            </div>
            
            <!-- Quiz Container -->
            <div class="quiz-container" id="quizContainer"></div>
            
            <!-- Results Screen -->
            <div class="results-screen hidden" id="resultsScreen"></div>
            
            <!-- Export Section -->
            <div class="export-section">
                <button class="export-btn" id="exportProgress">
                    <i class="fas fa-download"></i>
                    Export Progress Data
                </button>
                <button class="export-btn" id="createCustomQuizBtn" style="margin-left: 12px;">
                    <i class="fas fa-plus"></i>
                    Create Custom Quiz
                </button>
            </div>
        </div>
    </div>
    <!-- Add this after the export-section div -->
<div class="custom-question-modal hidden" id="customQuestionModal">
    <div class="modal-content glass-effect">
        <h3>Create Custom Question</h3>
        <form id="customQuestionForm">
            <div class="form-group">
                <label>Question</label>
                <textarea id="customQuestionText" placeholder="Enter your question..." required></textarea>
            </div>
            <div class="form-group">
                <label>Options</label>
                <input type="text" id="customOption1" placeholder="Option A" required>
                <input type="text" id="customOption2" placeholder="Option B" required>
                <input type="text" id="customOption3" placeholder="Option C" required>
                <input type="text" id="customOption4" placeholder="Option D" required>
            </div>
            <div class="form-group">
                <label>Correct Answer</label>
                <select id="customCorrectAnswer" required>
                    <option value="0">A</option>
                    <option value="1">B</option>
                    <option value="2">C</option>
                    <option value="3">D</option>
                </select>
            </div>
            <div class="form-group">
                <label>Explanation</label>
                <textarea id="customExplanation" placeholder="Add explanation..." required></textarea>
            </div>
            <div class="form-group">
                <label>Category</label>
                <input type="text" id="customCategory" placeholder="e.g., Anatomy Fundamentals" required>
            </div>
            <div class="form-actions">
                <button type="button" class="quiz-btn" onclick="hideCustomQuestionCreator()">Cancel</button>
                <button type="submit" class="quiz-btn check-btn">Create Question</button>
            </div>
        </form>
    </div>
</div>
<script src="script.js"></script>
</body>
<script>
    

// Anti-copy, anti-inspect measures
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
});
document.addEventListener('keydown', function(e) {
    if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 73) || (e.ctrlKey && e.shiftKey && e.keyCode === 74) || (e.ctrlKey && e.keyCode === 85)) {
        e.preventDefault();
    }
});
// Enhanced quiz data with more questions
const quizData = [
    {
        "id": 1,
        "question": "Which branch of anatomy is the basis for physical examination and part of physical diagnosis?",
        "options": [
            "Surgical anatomy",
            "Surface anatomy",
            "Radiological anatomy",
            "Cadaver anatomy"
        ],
        "answer": 1,
        "correctAnswer": "Surface anatomy",
        "explanation": "Surface anatomy studies external body landmarks, essential for physical examinations and diagnosis.",
        "whyNotOtherOptions": {
            "a": "Surgical anatomy focuses on surgical procedures.",
            "c": "Radiological anatomy uses imaging, not physical exams.",
            "d": "Cadaver anatomy is dissection-based, not clinical."
        },
        "relatedQuestions": ["2"],
        "category": "Anatomy Fundamentals",
        "difficulty": "Medium"
    },
    {
        "id": 2,
        "question": "Which statement is correct about the anatomical position?",
        "options": [
            "Palms of the subject stand erect facing forwards",
            "The upper extremities are placed at the sides",
            "The palms of the hands are turned forward",
            "The head and eyes are facing forwards",
            "None of the above"
        ],
        "answer": 4,
        "correctAnswer": "None of the above",
        "explanation": "The anatomical position includes standing erect, arms at sides, palms forward, and head/eyes facing forward.",
        "whyNotOtherOptions": {
            "a": "Palms don't 'stand erect'; they face forward.",
            "b": "Correct but incomplete alone.",
            "c": "Correct but incomplete alone.",
            "d": "Correct but incomplete alone."
        },
        "relatedQuestions": ["1"],
        "category": "Anatomy Fundamentals",
        "difficulty": "Medium"
    },
    {
        "id": 3,
        "question": "What is the primary neurotransmitter at the neuromuscular junction?",
        "options": [
            "Dopamine",
            "Acetylcholine",
            "Serotonin",
            "GABA"
        ],
        "answer": 1,
        "correctAnswer": "Acetylcholine",
        "explanation": "Acetylcholine is the primary neurotransmitter at the neuromuscular junction, responsible for muscle contraction.",
        "whyNotOtherOptions": {
            "a": "Dopamine is involved in reward and movement.",
            "c": "Serotonin regulates mood and appetite.",
            "d": "GABA is an inhibitory neurotransmitter."
        },
        "relatedQuestions": [],
        "category": "Neuroanatomy",
        "difficulty": "Easy"
    },
    {
        "id": 4,
        "question": "Which of the following is NOT a function of the liver?",
        "options": [
            "Protein synthesis",
            "Bile production",
            "Glycogen storage",
            "Insulin production"
        ],
        "answer": 3,
        "correctAnswer": "Insulin production",
        "explanation": "The liver performs many functions but insulin is produced by the pancreas.",
        "whyNotOtherOptions": {
            "a": "Liver synthesizes plasma proteins.",
            "b": "Liver produces bile for fat digestion.",
            "c": "Liver stores glycogen for energy."
        },
        "relatedQuestions": [],
        "category": "Gastrointestinal System",
        "difficulty": "Easy"
    },
    {
        "id": 5,
        "question": "The right common carotid artery is a branch of:",
        "options": [
            "Ascending aorta",
            "Aortic arch",
            "Brachiocephalic artery",
            "Right subclavian artery"
        ],
        "answer": 2,
        "correctAnswer": "Brachiocephalic artery",
        "explanation": "The right common carotid artery branches from the brachiocephalic artery.",
        "whyNotOtherOptions": {
            "a": "Ascending aorta has coronary arteries.",
            "b": "Aortic arch gives rise to brachiocephalic artery.",
            "d": "Right subclavian is another branch of brachiocephalic."
        },
        "relatedQuestions": [],
        "category": "Cardiovascular System",
        "difficulty": "Hard"
    }
];
// Core application variables
const overlay = document.getElementById('overlay');
const menuToggle = document.getElementById('menuToggle');
const sidebar = document.getElementById('sidebar');
const mainContent = document.getElementById('mainContent');
const categoriesGrid = document.getElementById('categoriesGrid');
const themeToggle = document.getElementById('themeToggle');
const quizContainer = document.getElementById('quizContainer');
const resultsScreen = document.getElementById('resultsScreen');
const pageTitle = document.getElementById('pageTitle');
const modeButtons = document.querySelectorAll('.mode-btn');
const correctAnswersEl = document.getElementById('correctAnswers');
const timeSpentEl = document.getElementById('timeSpent');
const masteryLevelEl = document.getElementById('masteryLevel');
const streakCountEl = document.getElementById('streakCount');
const searchInput = document.getElementById('searchInput');
const exportProgressBtn = document.getElementById('exportProgress');
const createCustomQuizBtn = document.getElementById('createCustomQuizBtn');
const customQuizModal = document.getElementById('customQuizModal');
const cancelCustomQuizBtn = document.getElementById('cancelCustomQuiz');
const createCustomQuizBtnModal = document.getElementById('createCustomQuiz');
const weakAreasCountEl = document.getElementById('weakAreasCount');
const avgTimePerQuestionEl = document.getElementById('avgTimePerQuestion');
const improvementRateEl = document.getElementById('improvementRate');
// Navigation elements
const navItems = document.querySelectorAll('.nav-item');
// Application state
let currentMode = 'exam';
let selectedCategories = [];
let currentQuestionIndex = 0;
let score = 0;
let userAnswers = [];
let questions = [];
let incorrectQuestions = [];
let isAnswerChecked = false;
let bookmarkedQuestions = new Set();
let userProgress = {};
let userStats = {
    totalQuestions: 0,
    correctAnswers: 0,
    timeSpent: 0,
    masteryLevel: 0,
    streak: 0,
    lastActive: null,
    weeklyProgress: []
};
let timerInterval = null;
let startTime = null;
let remainingTime = 0;
let isCountdown = false;
let examCheckMode = 'immediate';
let examSubmitted = false;
let questionTimers = [];
let searchResults = [];
let isSearchActive = false;
let currentPage = 'dashboard';
let customQuestions = [];
// COURSE MANAGEMENT SYSTEM
let coursesData = [];
let courseQuestions = {};
let allQuestions = []; // Global all questions

// Core application functions
async function init() {
    await loadCourseData();
    buildAllQuestions();
    updateCourseStats();
    initializeCategories();
    initializeEventListeners();
    initializeNavigation();
    loadUserData();
    updateDashboardStats();
    updateAnalytics();
    showDashboard();
    createFAB();
    updateCustomQuizModalHTML();
}
function createFAB() {
    const fab = document.createElement('button');
    fab.className = 'fab';
    fab.innerHTML = '<i class="fas fa-plus"></i>';
    fab.title = 'Create Custom Question';
    fab.addEventListener('click', showCustomQuestionCreator);
    document.body.appendChild(fab);
}
function initializeNavigation() {
    navItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            navItems.forEach(nav => nav.classList.remove('active'));
            item.classList.add('active');
           
            switch(index) {
                case 0: // Dashboard
                    currentPage = 'dashboard';
                    showDashboard();
                    break;
                case 1: // My Courses
                    currentPage = 'courses';
                    showCourses();
                    break;
                case 2: // Progress Analytics
                    currentPage = 'analytics';
                    showAnalytics();
                    break;
                case 3: // Bookmarked Questions
                    currentPage = 'bookmarks';
                    showBookmarks();
                    break;
                case 4: // Settings
                    currentPage = 'settings';
                    showSettings();
                    break;
            }
           
            closeSidebar();
        });
    });
}
function showDashboard() {
    hideAllSections();
    document.querySelector('.stats-grid').style.display = 'grid';
    document.querySelector('.analytics-section').style.display = 'block';
    document.querySelector('.search-container').style.display = 'block';
    document.querySelector('.export-section').style.display = 'block';
   
    // Reset page title
    pageTitle.textContent = 'Medical Quiz Dashboard';
    updateDashboardStats();
   
    // Only show all questions if not in search mode
    if (!isSearchActive) {
        questions = allQuestions;
        selectedCategories = [...new Set(questions.map(q => q.category))];
        renderQuizLayout();
    } else {
        // If we're in search mode, show the search results
        performSearch(searchInput.value.trim().toLowerCase());
    }
}
// Load courses and questions from external JSON files
async function loadCourseData() {
    try {
        // Load courses data
        const coursesResponse = await fetch('./courses.json');
        coursesData = await coursesResponse.json();
       
        // Load course questions
        const questionsResponse = await fetch('./course-questions.json');
        courseQuestions = await questionsResponse.json();
       
        console.log('Course data loaded successfully');
    } catch (error) {
        console.error('Error loading course data:', error);
        // Fallback to default data if files don't exist
        coursesData = getDefaultCourses();
        courseQuestions = getDefaultCourseQuestions();
    }
}
// Build global allQuestions by merging all sources without duplicates
function buildAllQuestions() {
    allQuestions = [...quizData];
    Object.values(courseQuestions).flat().forEach(q => {
        if (!allQuestions.some(existing => existing.id === q.id)) {
            allQuestions.push(q);
        }
    });
    customQuestions.forEach(q => {
        if (!allQuestions.some(existing => existing.id === q.id)) {
            allQuestions.push(q);
        }
    });
}
// Update course stats dynamically based on actual questions and user progress
function updateCourseStats() {
    coursesData.forEach(course => {
        const catQs = getQuestionsByCategory(course.category);
        course.totalQuestions = catQs.length;
        course.completedQuestions = catQs.filter(q => userProgress[q.id]?.correct > 0).length; // Completed if correct at least once
        course.progress = course.totalQuestions > 0 ? Math.round((course.completedQuestions / course.totalQuestions) * 100) : 0;
        // completedModules could be derived if needed, but leaving as manual for now
    });
}
// Default fallback data
function getDefaultCourses() {
    return [
    {
        "id": 1,
        "title": "Anatomy Mastery",
        "icon": "fas fa-brain",
        "color": "#6366f1",
        "progress": 75,
        "description": "Build foundational anatomy knowledge through systematic learning",
        "modules": 10,
        "completedModules": 7,
        "totalQuestions": 150,
        "completedQuestions": 112,
        "category": "Anatomy Fundamentals",
        "duration": "8 weeks",
        "level": "Beginner to Intermediate",
        "objectives": [
            "Understand human body structure",
            "Master anatomical terminology",
            "Identify major organs and systems"
        ],
        "chapters": [
            "Chapter 1: Introduction to Anatomy",
            "Chapter 2: Basic Structures",
            "Chapter 3: Organ Systems",
            "Chapter 4: Clinical Applications",
            "Chapter 5: Review and Cases"
        ]
    },
    {
        "id": 2,
        "title": "Physiology Deep Dive",
        "icon": "fas fa-heartbeat",
        "color": "#06b6d4",
        "progress": 45,
        "description": "Understand body systems and functions in depth",
        "modules": 12,
        "completedModules": 5,
        "totalQuestions": 180,
        "completedQuestions": 81,
        "category": "Physiology",
        "duration": "10 weeks",
        "level": "Intermediate",
        "objectives": [
            "Learn cellular physiology",
            "Understand organ system functions",
            "Master homeostatic mechanisms"
        ],
        "chapters": [
            "Chapter 1: Cellular Physiology",
            "Chapter 2: Organ Functions",
            "Chapter 3: Homeostasis",
            "Chapter 4: Advanced Mechanisms",
            "Chapter 5: Integration and Review"
        ]
    },
    {
        "id": 3,
        "title": "Clinical Pathology",
        "icon": "fas fa-virus",
        "color": "#10b981",
        "progress": 30,
        "description": "Study diseases, diagnostics, and pathological processes",
        "modules": 8,
        "completedModules": 2,
        "totalQuestions": 120,
        "completedQuestions": 36,
        "category": "Pathology",
        "duration": "6 weeks",
        "level": "Intermediate to Advanced",
        "objectives": [
            "Understand disease mechanisms",
            "Learn diagnostic techniques",
            "Study common pathologies"
        ],
        "chapters": [
            "Chapter 1: Disease Mechanisms",
            "Chapter 2: Diagnostic Techniques",
            "Chapter 3: Common Pathologies",
            "Chapter 4: Advanced Cases",
            "Chapter 5: Treatment Approaches"
        ]
    }
];
}
function getDefaultCourseQuestions() {
    return {
    "Anatomy Fundamentals": [
        {
            "id": 101,
            "question": "Which bone is commonly known as the collarbone?",
            "options": ["Scapula", "Clavicle", "Humerus", "Sternum"],
            "answer": 1,
            "correctAnswer": "Clavicle",
            "explanation": "The clavicle, also known as the collarbone, is a long bone that serves as a strut between the shoulder blade and the sternum.",
            "whyNotOtherOptions": {
                "a": "Scapula is the shoulder blade",
                "c": "Humerus is the upper arm bone",
                "d": "Sternum is the breastbone"
            },
            "relatedQuestions": ["102"],
            "category": "Anatomy Fundamentals",
            "difficulty": "Easy"
        },
        {
            "id": 102,
            "question": "The mitral valve is located between which two chambers of the heart?",
            "options": [
                "Right atrium and right ventricle",
                "Left atrium and left ventricle",
                "Right ventricle and pulmonary artery",
                "Left ventricle and aorta"
            ],
            "answer": 1,
            "correctAnswer": "Left atrium and left ventricle",
            "explanation": "The mitral valve (bicuspid valve) prevents backflow of blood from the left ventricle to the left atrium.",
            "whyNotOtherOptions": {
                "a": "Tricuspid valve is between right atrium and ventricle",
                "c": "Pulmonary valve is between right ventricle and pulmonary artery",
                "d": "Aortic valve is between left ventricle and aorta"
            },
            "relatedQuestions": ["101"],
            "category": "Anatomy Fundamentals",
            "difficulty": "Medium"
        }
    ],
    "Physiology": [
        {
            "id": 201,
            "question": "Which hormone regulates calcium levels in the blood?",
            "options": ["Insulin", "Thyroxine", "Parathyroid hormone", "Cortisol"],
            "answer": 2,
            "correctAnswer": "Parathyroid hormone",
            "explanation": "Parathyroid hormone (PTH) increases blood calcium levels by stimulating bone resorption and calcium reabsorption in kidneys.",
            "whyNotOtherOptions": {
                "a": "Insulin regulates blood glucose",
                "b": "Thyroxine regulates metabolism",
                "d": "Cortisol is a stress hormone"
            },
            "relatedQuestions": [],
            "category": "Physiology",
            "difficulty": "Medium"
        }
    ]
};
}
function showCourses() {
    hideAllSections();
    pageTitle.textContent = 'My Courses';
   
    quizContainer.innerHTML = `
        <div style="padding: 24px;">
            <div style="text-align: center; margin-bottom: 40px;">
                <div style="font-size: 80px; color: var(--primary); margin-bottom: 20px; opacity: 0.8;">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h2 style="font-size: 32px; margin-bottom: 16px; color: var(--text-primary); background: linear-gradient(135deg, var(--primary), var(--primary-dark)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;">Learning Pathways</h2>
                <p style="color: var(--text-secondary); margin-bottom: 40px; max-width: 600px; margin-left: auto; margin-right: auto; font-size: 16px; line-height: 1.6;">
                    Structured learning paths designed to build your medical knowledge systematically. Each course includes modules, quizzes, and progress tracking.
                </p>
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px;">
                ${coursesData.map(course => createCourseCard(course)).join('')}
            </div>
        </div>
    `;
    quizContainer.classList.remove('hidden');
}
function createCourseCard(course) {
    return `
        <div class="course-card glass-effect" style="cursor: pointer; border-radius: 20px; padding: 24px; border-left: 4px solid ${course.color};" onclick="showCourseDetails(${course.id})">
            <div class="course-header" style="display: flex; align-items: flex-start; gap: 16px; margin-bottom: 16px;">
                <div class="course-icon" style="width: 50px; height: 50px; border-radius: 12px; background: ${course.color}20; color: ${course.color}; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0;">
                    <i class="${course.icon}"></i>
                </div>
                <div style="flex: 1;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                        <h3 style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin: 0;">${course.title}</h3>
                        <div style="display: flex; gap: 8px;">
                            <span style="font-size: 11px; color: ${course.color}; background: ${course.color}15; padding: 4px 8px; border-radius: 12px; font-weight: 600;">${course.level}</span>
                            <span style="font-size: 11px; color: var(--text-tertiary); background: var(--glass); padding: 4px 8px; border-radius: 12px; font-weight: 500;">${course.duration}</span>
                        </div>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.5; margin: 0;">${course.description}</p>
                </div>
            </div>
           
            <div class="course-progress" style="margin-bottom: 16px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span style="font-size: 14px; color: var(--text-secondary); font-weight: 600;">Progress</span>
                    <span style="font-size: 14px; color: ${course.color}; font-weight: 700;">${course.progress}%</span>
                </div>
                <div class="progress-bar" style="height: 6px; background: var(--border); border-radius: 3px; overflow: hidden;">
                    <div class="progress-fill" style="height: 100%; background: ${course.color}; border-radius: 3px; width: ${course.progress}%; transition: width 0.5s ease;"></div>
                </div>
            </div>
           
            <div class="course-stats" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                <div style="text-align: center; padding: 12px; background: var(--glass); border-radius: 12px;">
                    <div style="font-size: 18px; font-weight: 700; color: ${course.color}; margin-bottom: 4px;">${course.completedModules}/${course.modules}</div>
                    <div style="font-size: 11px; color: var(--text-secondary);">Modules</div>
                </div>
                <div style="text-align: center; padding: 12px; background: var(--glass); border-radius: 12px;">
                    <div style="font-size: 18px; font-weight: 700; color: ${course.color}; margin-bottom: 4px;">${course.completedQuestions}/${course.totalQuestions}</div>
                    <div style="font-size: 11px; color: var(--text-secondary);">Questions</div>
                </div>
            </div>
           
            <div class="course-actions" style="display: flex; gap: 8px;">
                <button class="course-btn" onclick="event.stopPropagation(); startCourseQuiz(${course.id})" style="flex: 1; background: ${course.color}; color: white; border: none; padding: 10px 16px; border-radius: 10px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-play" style="margin-right: 6px;"></i>Quiz
                </button>
                <button class="course-btn" onclick="event.stopPropagation(); startCourseExam(${course.id})" style="flex: 1; background: transparent; color: ${course.color}; border: 1.5px solid ${course.color}; padding: 10px 16px; border-radius: 10px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-file-alt" style="margin-right: 6px;"></i>Exam
                </button>
                <button class="course-btn" onclick="event.stopPropagation(); startCourseLearn(${course.id})" style="flex: 1; background: transparent; color: var(--text-secondary); border: 1.5px solid var(--border); padding: 10px 16px; border-radius: 10px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-brain" style="margin-right: 6px;"></i>Learn
                </button>
            </div>
        </div>
    `;
}
function startCourse(courseId) {
    const course = coursesData.find(c => c.id === courseId);
    if (!course) return;
   
    // Show course overview/modal
    showCourseDetails(courseId);
}
function startCourseQuiz(courseId) {
    const course = coursesData.find(c => c.id === courseId);
    if (!course) return;
   
    // Get questions for this course category
    const courseQuizQuestions = getQuestionsByCategory(course.category);
   
    if (courseQuizQuestions.length === 0) {
        showNotification(`No questions available for ${course.title} yet.`, 'info');
        return;
    }
   
    // Set up quiz
    questions = courseQuizQuestions;
    currentQuestionIndex = 0;
    userAnswers = new Array(questions.length);
    isAnswerChecked = false;
    currentMode = 'quiz';
   
    // Update UI
    modeButtons.forEach(b => b.classList.remove('active'));
    modeButtons[1].classList.add('active');
    pageTitle.textContent = `Quiz - ${course.title}`;
   
    hideAllSections();
    quizContainer.classList.remove('hidden');
    renderQuizLayout();
   
    showNotification(`Starting ${course.title} quiz with ${questions.length} questions`, 'success');
}
function startCourseExam(courseId) {
    const course = coursesData.find(c => c.id === courseId);
    if (!course) return;
    // Get questions for this course
    const courseExamQuestions = getQuestionsByCategory(course.category);
   
    if (courseExamQuestions.length === 0) {
        showNotification(`No questions available for ${course.title} yet.`, 'info');
        return;
    }
    // Set up exam with all original features
    questions = courseExamQuestions;
    currentQuestionIndex = 0;
    userAnswers = new Array(questions.length);
    isAnswerChecked = false;
    examSubmitted = false;
    currentMode = 'exam';
    examCheckMode = 'all-at-once'; // Default exam mode
    // Exam timing (2 minutes per question)
    isCountdown = true;
    remainingTime = questions.length * 120;
    // Update UI
    modeButtons.forEach(b => b.classList.remove('active'));
    modeButtons[0].classList.add('active');
    pageTitle.textContent = `Exam - ${course.title}`;
    hideAllSections();
    quizContainer.classList.remove('hidden');
    startTimer();
    renderQuizLayout();
    showNotification(`Starting ${course.title} exam with ${questions.length} questions. Time: ${Math.floor(remainingTime/60)}min`, 'info');
}
function startCourseLearn(courseId) {
    const course = coursesData.find(c => c.id === courseId);
    if (!course) return;
    // Get questions for this course
    const courseLearnQuestions = getQuestionsByCategory(course.category);
   
    if (courseLearnQuestions.length === 0) {
        showNotification(`No questions available for ${course.title} yet.`, 'info');
        return;
    }
    // Set up learn mode
    questions = courseLearnQuestions;
    currentQuestionIndex = 0;
    userAnswers = new Array(questions.length);
    isAnswerChecked = false;
    currentMode = 'learn';
    // Update UI
    modeButtons.forEach(b => b.classList.remove('active'));
    modeButtons[2].classList.add('active');
    pageTitle.textContent = `Learn - ${course.title}`;
    hideAllSections();
    quizContainer.classList.remove('hidden');
    renderQuizLayout();
    showNotification(`Starting ${course.title} learning session with ${questions.length} questions`, 'info');
}
function showCourseDetails(courseId) {
    const course = coursesData.find(c => c.id === courseId);
    if (!course) return;
   
    const modal = document.createElement('div');
    modal.className = 'custom-quiz-modal active';
    modal.innerHTML = `
        <div class="custom-quiz-content glass-effect" style="max-width: 700px; border-radius: 24px;">
            <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 24px;">
                <h3 style="font-size: 24px; font-weight: 700; color: var(--text-primary);">${course.title}</h3>
                <button class="action-btn" onclick="this.closest('.custom-quiz-modal').remove()" style="background: rgba(239, 68, 68, 0.1); color: var(--error);">
                    <i class="fas fa-times"></i>
                </button>
            </div>
           
            <div style="display: flex; align-items: center; gap: 20px; margin-bottom: 24px; padding: 24px; background: var(--glass); border-radius: 20px;">
                <div class="course-icon" style="width: 80px; height: 80px; border-radius: 16px; background: ${course.color}20; color: ${course.color}; display: flex; align-items: center; justify-content: center; font-size: 32px;">
                    <i class="${course.icon}"></i>
                </div>
                <div style="flex: 1;">
                    <div style="font-size: 18px; color: var(--text-secondary); margin-bottom: 8px;">${course.description}</div>
                    <div style="display: flex; gap: 16px; font-size: 14px; color: var(--text-tertiary); flex-wrap: wrap;">
                        <span><i class="fas fa-clock"></i> ${course.duration}</span>
                        <span><i class="fas fa-layer-group"></i> ${course.level}</span>
                        <span><i class="fas fa-book"></i> ${course.modules} modules</span>
                        <span><i class="fas fa-question-circle"></i> ${course.totalQuestions} questions</span>
                    </div>
                </div>
            </div>
           
            ${course.objectives ? `
            <div style="margin-bottom: 24px;">
                <h4 style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 12px;">Learning Objectives</h4>
                <div style="display: grid; gap: 8px;">
                    ${course.objectives.map(obj => `
                        <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: var(--glass); border-radius: 12px;">
                            <i class="fas fa-check" style="color: ${course.color}; font-size: 12px;"></i>
                            <span style="color: var(--text-secondary); font-size: 14px;">${obj}</span>
                        </div>
                    `).join('')}
                </div>
            </div>
            ` : ''}
           
            <div style="margin-bottom: 24px;">
                <h4 style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: 12px;">Chapters</h4>
                <div style="max-height: 200px; overflow-y: auto; display: grid; gap: 8px;">
                    ${course.chapters.map(chapter => `
                        <div onclick="window.location.href='chapter4.html'" style="cursor: pointer; padding: 12px; background: var(--glass); border-radius: 12px; color: var(--text-secondary);">
                            ${chapter}
                        </div>
                    `).join('')}
                </div>
            </div>
           
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 24px;">
                <div style="text-align: center; padding: 20px; background: var(--glass); border-radius: 16px;">
                    <div style="font-size: 28px; font-weight: 700; color: ${course.color}; margin-bottom: 8px;">${course.completedModules}/${course.modules}</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Modules Completed</div>
                </div>
                <div style="text-align: center; padding: 20px; background: var(--glass); border-radius: 16px;">
                    <div style="font-size: 28px; font-weight: 700; color: ${course.color}; margin-bottom: 8px;">${course.completedQuestions}/${course.totalQuestions}</div>
                    <div style="font-size: 14px; color: var(--text-secondary);">Questions Answered</div>
                </div>
            </div>
           
            <div style="margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <span style="font-size: 16px; color: var(--text-secondary); font-weight: 600;">Overall Progress</span>
                    <span style="font-size: 16px; color: ${course.color}; font-weight: 700;">${course.progress}%</span>
                </div>
                <div class="progress-bar" style="height: 10px; background: var(--border); border-radius: 5px; overflow: hidden;">
                    <div class="progress-fill" style="height: 100%; background: ${course.color}; border-radius: 5px; width: ${course.progress}%;"></div>
                </div>
            </div>
           
            <div class="custom-quiz-actions" style="display: flex; gap: 12px; justify-content: space-between;">
                <div style="display: flex; gap: 12px;">
                    <button class="quiz-btn" onclick="this.closest('.custom-quiz-modal').remove()" style="background: var(--secondary); color: white;">
                        Close
                    </button>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button class="quiz-btn" onclick="startCourseLearn(${course.id}); this.closest('.custom-quiz-modal').remove()" style="background: transparent; color: var(--text-secondary); border: 1.5px solid var(--border);">
                        <i class="fas fa-brain"></i> Learn
                    </button>
                    <button class="quiz-btn check-btn" onclick="startCourseQuiz(${course.id}); this.closest('.custom-quiz-modal').remove()">
                        <i class="fas fa-play"></i> Quiz
                    </button>
                    <button class="quiz-btn next-btn" onclick="startCourseExam(${course.id}); this.closest('.custom-quiz-modal').remove()">
                        <i class="fas fa-file-alt"></i> Exam
                    </button>
                </div>
            </div>
        </div>
    `;
   
    document.body.appendChild(modal);
}
</script>
</html>

